
## Проект «YaMDb»

### Описание проекта

Проект YaMDb собирает отзывы пользователей на произведения. Произведения делятся на категории: «Книги», «Фильмы», «Музыка».
Произведению может быть присвоен жанр. Новые жанры может создавать только администратор.
Читатели оставляют к произведениям текстовые отзывы, и выставляют рейтинг (оценку в диапазоне от одного до десяти).
Из множества оценок автоматически высчитывается средняя оценка произведения.

API-сервис реализован для взаимодействия сторонних программ и приложений с данной базой данных.

**Функциональные возможности:**

## Алгоритм регистрации пользователей
- Пользователь отправляет POST-запрос на добавление нового пользователя с параметрами *email* и *username* на эндпоинт /api/v1/auth/signup/.
- Сервис **YaMDB** отправляет письмо с кодом подтверждения (*confirmation_code*) на адрес *email*.
- Пользователь отправляет POST-запрос с параметрами *username* и *confirmation_code* на эндпоинт /api/v1/auth/token/, в ответе на запрос ему приходит token (JWT-токен).
- Пользователь может отправить PATCH-запрос на эндпоинт /api/v1/users/me/ и заполнить поля в своём профайле (описание полей — в документации).

## Пользовательские роли
- **Аноним** — может просматривать описания произведений, читать отзывы и комментарии.
- **Аутентифицированный пользователь** (*user*) — может, как и **Аноним**, читать всё, дополнительно он может публиковать отзывы и ставить оценку произведениям (фильмам/книгам/песенкам), может комментировать чужие отзывы; может редактировать и удалять свои отзывы и комментарии. Эта роль присваивается по умолчанию каждому новому пользователю.
- **Модератор** (*moderator*) — те же права, что и у **Аутентифицированного пользователя** плюс право удалять любые отзывы и комментарии.
- **Администратор** (*admin*) — полные права на управление всем контентом проекта. Может создавать и удалять произведения, категории и жанры. Может назначать роли пользователям.
- **Суперюзер Django** — обладает правами администратора (*admin*)

## Ресурсы API YaMDb
- Ресурс auth: аутентификация.
- Ресурс users: пользователи.
- Ресурс titles: произведения, к которым пишут отзывы (определённый фильм, книга или песня).
- Ресурс categories: категории (типы) произведений («Фильмы», «Книги», «Музыка»). Одно произведение может быть привязано только к одной категории.
- Ресурс genres: жанры произведений. Одно произведение может быть привязано к нескольким жанрам.
- Ресурс reviews: отзывы на произведения. Отзыв привязан к определённому произведению.
- Ресурс comments: комментарии к отзывам. Комментарий привязан к определённому отзыву.

### Стек технологий

- Python 3.7
- Django 3.2
- Django Rest Framework 3.12.4
- Django-filter 22.1
- Pytest 6.2.4
- Pytest-pythonpath 0.7.3
- Pytest-django 4.4.0
- Pillow 9.3.0
- PyJWT 2.1.0
- Requests 2.26.0

### Запуск проекта

- Склонируйте репозиторий:  
``` git clone https://github.com/mcevaf/api_yamdb.git ```    
- Установите и активируйте виртуальное окружение:  
``` python -m venv venv ```  
``` source venv/Scripts/activate ``` 
- Установите зависимости из файла requirements.txt:   
``` pip install -r requirements.txt ```
- Перейдите в папку api_yamdb/api_yamdb.
``` cd api_yamdb ```
- Примените миграции:   
``` python manage.py migrate ```
- Выполните команду:   
``` python manage.py runserver ```

### Документация API
Документация API доступна по адресу ```http://127.0.0.1:8000/redoc/``` после запуска проекта.

**Примеры запросов**

Эндпоинт ```api/v1/auth/signup/```

_Регистрация нового пользователя (POST)_

Образец запроса
```sh
{
"email": "user@example.com",
"username": "string"
}
```

Образец ответа
```sh
{
"email": "string",
"username": "string"
}
```

Эндпоинт ```api/v1/auth/signup/```

_Получение списка всех произведений (GET)_
```sh
{
"count": 0,
"next": "string",
"previous": "string",
"results": [
{}
]
}
```

Эндпоинт ```api/v1/titles/{title_id}/reviews/{review_id}/comments/{comment_id}/```

_Частичное обновление комментария к отзыву (PATCH)_

Образец запроса
```sh
{
"text": "string"
}
```
Образец ответа
```sh
{
"id": 0,
"text": "string",
"author": "string",
"pub_date": "2019-08-24T14:15:22Z"
}
```

### Авторы проекта
- [Михаил Зотов](https://github.com/mikabud)
- [Фатима Макабаева](https://github.com/mcevaf)
- [Тарас Михайлов](https://github.com/Jamah1)
